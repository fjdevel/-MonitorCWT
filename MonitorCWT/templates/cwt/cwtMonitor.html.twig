{% extends 'basenavbar.html.twig' %}

{% block title %}CWT Monitor
{% endblock %}


{% block content %}
	<div class="container-fluid mt-2">
		<div class="row">
			<div class="col-md-3">
				<h6 class="mt-1">Select the Device</h6>
				<div class="dropdown">
					<button class="btn btn-info dropdown-toggle d-none" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Devices
					</button>
					<div class="spinner-border" role="status" id="spinnerDevices">
								<span class="sr-only">Loading...</span>
							</div>
					<div id="dropdown-menu" class="dropdown-menu" aria-labelledby="dropdownMenuButton">	
					</div>
				</div>
				<h6 class="mt-1">Select one or more interfaces</h6>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Interface 1
					</label>
				</div>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Interface 2
					</label>
				</div>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Interface 3
					</label>
				</div>

				<h6 class="mt-1">Select the variables to monitor</h6>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Frequency
					</label>
				</div>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Voltage
					</label>
				</div>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Power
					</label>
				</div>

				<h6>Graphic options</h6>
				<div class="form-check mt-1">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1">
						Group
					</label>
				</div>
			</div>
			<div class="col-md-9">
				<div class="w-100">
					<canvas id="chartjs-0"></canvas>
				</div>

			</div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
	<script>
	new Chart(document.getElementById("chartjs-0"),{"type":"line","data":{"labels":["January","February","March","April","May","June","July"],"datasets":[{"label":"My First Dataset","data":[65,59,80,81,56,55,40],"fill":false,"borderColor":"rgb(75, 192, 192)","lineTension":0.1}]},"options":{}});
	</script>
	<script>
	$(function() {
		let devices = $.post("{{path('myDevices')}}");
		$.when(devices).done(function(data){
			data.forEach(element => {
				$('#dropdown-menu').append("<li class="+"dropdown-item"+">"+ element.deviceId +"</li>");
			});
			$('#dropdownMenuButton').toggleClass('d-none');
			$('#spinnerDevices').toggleClass('d-none');
		});
	});
	</script>
{% endblock %}
