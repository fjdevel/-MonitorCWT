{% extends 'basenavbar.html.twig' %}

{% block title %}Administration
{% endblock %}
{% block stylesheets %}
	<style></style>
{% endblock %}
{% block content %}
	<div class="container-fluid">
		<div class="row">
			<nav class="col-md-2 d-md-block bg-light">
				<div class="sidebar-sticky">
					<ul class="nav flex-column">
						<li class="nav-item" id="devices">
							<a class="nav-link text-dark" href="{{path('device')}}">
								<span class="fas fa-satellite-dish mr-1"></span>Devices
							</a>
						</li>
					</ul>
				</div>
			</nav>
			<main
				id="main" role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
				{# Contenido #}
				<div class="container mt-5">
					<div class="col-md-6">
						<div>
							<button class="btn btn-info" onclick="findDevices()">
								<span class="fas fa-search mr-1"></span>Find devices</button>
							<div class="spinner-border d-none" role="status" id="spinner">
								<span class="sr-only">Loading...</span>
							</div>
						</div>
						<form action="{{path('newDevice')}}" method="post" class="mt-2">
							<div class="form-group">
								<label for="deviceSelect">Select the device to register</label>
								<select class="form-control" id="deviceSelect" name="deviceSelect" required></select>
							</div>
							
							{# <div class="form-group">
								<label for="nameDevice">Name of the device</label>
								<input type="text" class="form-control" id="nameDevice" name="nameDevice" required>
							</div> #}
							<button type="submit" class="btn btn-success">Save</button>
						</form>
					</div>
				</div>
			</main>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script>
		function findDevices() {
$('#spinner').toggleClass('d-none');
let p = $.post("{{ path('findDevices') }}");
$.when(p).done(function (data) {
data.forEach(function (dv) {
$('#deviceSelect').append(new Option(dv, dv));
});
$('#spinner').toggleClass('d-none');
});
}
	</script>
{% endblock %}
